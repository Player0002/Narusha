제어파트
LED 명령 지시 파트

메인보드 
제일 중요한 역할 - 스텝 모터를 동작시켜 내가 원하는 위치로 가서 점을 찍을 수 있어야함.
스텝모터 제어가 원하는데로 안되기 떄문에 이를 G코드를 받아서 어느위치로 가서 얼마만큼의 양을 뿌려라라는 코드가 있는데 그 코드를 하나씩 읽어서 스텝모터가 작업을 합니다. 그파트

PC UI 파트

이렇게 해서 크게 기부부 LCD파트 메인보드 파트 PC쪽 UI 이렇게 4개 파트로 나눠서 진행할 것 같습니다. 2학기동안. 근데 메인보드쪽에서 먼저 보면 여러분들 지금 수업시간에 나가는 아두이노 가지고는 이를 다 동작 못시킵니다. 레지스터를 동작시켜야 합니다. 그래서 네고레지스터 사용하는법을 DPIO나 그런 타이머 종류까지는 우선 하고 수업시간에 안하는 것들을 미리 하고 작업을 해야할 거 같아요 수업시간에 하는거 가지고는 못하기 떄문에 그래서 지금 우선은 수업시간에 했던 내용을 가지고 좀 더 레지스터를 다뤄보도록 할꼐요 자료들이 우선은 오늘 이렇게 하고 나중에 자료를 따로 드리도록 하겠습니다. 우선은 진도를 나가도록 할께요 질문사항

질문 할거는 없는걸로 됨.

여기 전시대 같은 얘기는 없죠 ?
네 없었어요
아 근데 지금 기숙사 괜찮나요? 기숙사?
오늘 처음 들어왔어요 학교에 짐도 제대로 못풀었어요 오늘 왔어요 오늘 
어제 안왔고?
네 검사만 했어요

정신없겠네 ^^ 검사결과는 오늘 다 나왔고
네~ 
정신없겠네 지금 그러면 
아 이게 참 쉽지가 않네 영상으로 프로젝트 수업을 하려니까 그리고 자꾸 끊기네 내 PC가 문제일까? 이게 영상 처리하고 같이하다 보니까 
끊겨버렸다~ 이히히힣
영상중지했어요 이제 좀 나을려나 나중에 지금 영상을 촬영하려니까 도저히 안되겠네 음..
음 지금 우선은 발표하기 

그러면 우리가 사용하는 이 PCU는 이 포트라는게 있어요 포트 포트는 항구에요 항구 그러니까 입출 들어왔다 나갔다 하는 관문이라고 보면 되겠네요
이게 전원이 나갔다 들어갔다 하는 부분을 포트라고 하는데 AVR에서 포트가 0 ~ 7번까지 B포트 C포트 0 ~ 5 D포트 0~5번까지 근데 포트 B, C , D 큰 칩들은 A부터 H까지 그렇게 포트가 있습니다. 8핀씩 할당이 되어있어요. 그럼 우리가 아두이노에서 이용하는 PinMode라는거는 핀모드 라는 것은 ㅣㅇㄴ풋 또는 아웃풋을 설정하는 함수인데. 여기 핀모드 13번 이 13번은 여기 이렇게 가서 PB 5번이네요 그죠? 이 PB5번을 OUTPUT으로 INPUT으로 설정할지 이 함수에서 설정합니다. Output -> 아웃풋 인풋 -> 인풋으로 설정이되겠네요 그죠 그래서 아두이노에서 핀모드라는 것을 인풋 또는 아웃풋으로 설정ㅇ을 하는데 아웃풋 모드로 설정을 하게 되면 이 포트를 통해서 1을 내보낼지 0을 내보낼지는 digitalWrite를 사용을 합니다. digitalWrite 13 1 하게 되면 HIGH가 나가게 되는거고 13 0 을 하면 LOW가 나가게 되겠네요 그죠 그렇습니다. 그래서 digitalWrite pinMode 함수는 우리가 사용하기 쉽도록 함수로 라이브러리로 뺴놓은거죠. 그런데 여기까지는 괜찮아요 크게 성능차이가 없스니까. 여기 우리가 레지스터를 건들여야하는데 이를 건들기 위해서는 이 핀모드 또는 digitalWrite에 해당하는 그 레지스터를 건들여야 합니다 레지스터는 뭐냐면 하나의 메모리에요 메모리 메모리인데 어떤 메모리냐 CPU 내부에 어떤 기능들을 세팅하는 메모리에요. 그니까 데이터를 저장하는 메모리 RAM이 있고, RAM은 Random access memory ROM은 read only memory 요즘에 PC에 DDR 램이죠 Dynamic Ram 그런데 레지스터 라는 것은 CPU내부의 functuin 기능들을 설정하는 메모리에요 우리가 값을 넣어주면 이 값을 참조해서 작동합니다. 레지스터도 일종의 메모리인데 CPU 제어 메모리라고 보시면 되겠습니다. 이 레지스터에 값을 어떻게 설정하냐에 따라서 포트를 제어할 수 있습니다. 그러면 이 GPIO 그리고 먼저 GPIO 이는 General Purpos Input Output 일반적인 목적의 인풋 아웃풋 범용적인 목적이에요 그니까 한마디로 in out 핀을 GPIO로 보시면 됩니다. 1또는 0을 보내는 또는 입력을 받는 핀 이 GPIO를 설정하는 레지스터가 따로있고 CPU내부에 EXTI 가 있어요 외부 인터럽트를 세팅하는 레지스터가 따로있고, 타이머 CPU내부에 TImer가 돌아가는데 이를 세팅하는 레지스터가 따로있고 그래서 각각 기능별로 레지스터가 존재합니다. 그래서 우리가 이를 이용할때 레지스터를 어떻게 세팅하냐에 따라 기능들이 달라져요 통신관련해서 UWart ipac 뭐시기 ADC 여러가지 기능들이 있습니다. 이런것들을 묶어서 주변 장치라고 합니다. 영어로 Periprelal 페리페럴 그냥 줄여서 페리라고 이야기 하겠습니다. 이걸 제어를 잘해야지 CPU를 잘 돌릴 수 있습니다. 그래서 지금 13번 LED를 ON OFF 1초마다 ON OFF 하기 위해서 여기 레지스터를 사용을 해야하는데 우리가 지난시간에 수업시간에 했던 13번 LED ON OFF 하기 위해서 Pinmode output loop에서 digitalWrite HIGH Delay 1000 digitalWrite LOW Delay 1000 이러면 1초마다 깜빡깜빡했네요 레지스터를 제어를 해서 1초마다 깜빡깜빡 하게 해볼꼐요 여ㅣ서 우리가 회르를 참조를 해야할께 여기 나중에 잘 보시면 여기는 PIN 아날로그 핀도 여기있어요 . 13번 핀을 이렇게 연결을 해서 포트가 뭔지 PB 5번 이네요 그럼 나중에 또 자료를 드릴테니 우선 여기를 보시면 ATMega328 P 우노에 있는 CPU는 ATMEga 328 입니다. 이거 작아요 메가에 비해서 작고 암에 비해서 작습니다. Atmega328 refrence 메뉴 우리가 봐야할건 정해져 있어서 많진 않습니다. ARM은 1000페이지 이건 400페이지 정도
요즘 CPU 하나 한명이서 못합니다~



으으ㅡ흐흠

그래서 이제 AVR 328 메뉴얼을 좀 보시면 메뉴를 보시면 여기 왼쪽에 책깔피에서 IO Ports 이걸 열어보시면 이 IO Port가 DPIO 입니다. 여기 Register description 이걸 풀어보면 여기 밑에 요롷게 레지스터 들이 있어요 이 메뉴얼들은 디게 단순합니다. 암에 비해서''요가 보시면 PORT B DDRB PINB 요롷게 있네요 지금 저희가 이걸 하는 이유는 스텝모터를 돌리기 위해서 지금 이 작업을 하고 있습니다. 스텝모터를 먼저 그 순서가 화면하고 조금 다르게 할까 해서 우선 스텝모터를 동작을 먼저 해볼꼐요. 학교에 그 스텝모터 드라이버나 그런것들을 좀 구매를 해야하는데 어 그게 어떻게 될지 모르겠네요 그래서 StepMotor 동작시키기 위해서 타이머로 오늘은 안되고 당므시간에 타이머로 오늘은 DPIO하고 타이머 설명되면 설명하고 PORT B DDRB PINB 가 있네요 DDRB는 DDRB Register 이 AVR은 8bit 마이크로 입니다. AVR은 8비트 CPU 입니다. ARM은 32bit 그리고 기억하고 계산 잘해야할께 AVR은 16MHZ 외부클락이 이 16MHZ를 받아서 타이머가 사용하고 다른 회로들이 사용합니다. 오늘 첫시간에 여러분들에게 CPU 관련해서 듣고 조금 햇갈릴 수 도 있을거에요 좀 어렵다거나 조금 생소한 단어 계속 반복을 할꺼니까 우선은 듣고 넘겨줄 필요가 있어요 그러나 반복해서 들을때 이게 뭐다라고 알고있으면 좋을거 같아요 A포트는 PORT A DDR A PINA 이렇게 됩니다. C는 PORT C DDRC PINC 그래서 포트는 뭐냐면 Port B Data register ddr은 Data direction Register 그래서 이 DDR을 보면 Data Direction DDR 방향 OUTPUT 이냐 INPUT이냐 Pinmode에서 세팅하는 갑싱 DDRB에 설정되게 됩니다 PINMOde 안에 보면 dDRB를 세팅하게 됩니다. DDRB를 세팅하게 되면 PinMode에서 세팅하는거랑 같습니다. 8bit 레지스터 0~7번까지 있습니다. 첫번째 두번쨰라고는 안합니다 0번 몇번 이렇게 합니다 왜냐면 나중에 햇갈려요 0번비트 7번비트 이렇게 할꼐요 0번ㅌ부터 7번까지 작동할 수 있습니다. 각 비트는 각 핀에 해당하는 비트에요 0번 핀 1번핀 2번핀 그러면 회로도에서 13번은 PB5번이였죠 13번 핀은 PB5번 PB5번은 B에 DDRB 5번 여기가 1이 들어가면 OUTPUT DDRB 레지스터는 1은 아웃 0은 인풋 그렇습니다. 1이면 아웃풋 0이면 인풋 어떻게 하지 (종침) 화장실 그러면 10분 쉬었다가 합시다. 그러면 10분 쉬었다가 봅시다.